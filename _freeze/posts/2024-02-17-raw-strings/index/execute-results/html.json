{
  "hash": "54cb95b502378f5b2527a120bf9a9ec5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"ü•© raw strings üß∂\"\nauthor:\n  - name: Romain Fran√ßois\n    affiliation: tada‚¨¢science\n    affiliation-url: https://tada.science\ndate: 2024-02-17\ncategories: [R, string, facepalm]\nimage: raw.png\ncitation: \n  url: https://tada.science/posts/2024-02-17-raw-strings\ndraft: false\n---\n\n\n<img src=\"raw.png\" align=\"left\" height=\"138\" style=\"margin: 10px\"/>\n\n... ü§¶‚Äç‚ôÇÔ∏è so a few days ago, the [valentine](valentine.tada.science) üì¶ hit CRAN, and on the morning of feb 14, I was eager to post something using it on various socials.\n\nI had already posted about it a few days ago using typical examples, e.g. `valentine::roses(\"dplyr\")`, or `valentine::roses(\"data.table\")` ... so I wanted to post something different. üí° the package had arrived on CRAN so why not inception it and do `valentine::roses(\"valentine\")`.\n\nObviously, the ü§ñ does not know anything about an R package called `valentine`, which is the perfect use case for the `hint=` argument so can be used to add something to the prompt before it is sent to ChatGPT through the [irudnyts/openai](https://irudnyts.github.io/openai/) package.\n\n\n{{< share-post https://www.linkedin.com/posts/romain-francois_happy-valentines-day-to-all-r-lovers-activity-7163416742227083264-5UPV >}}\n\n\n\nI later realised I made a mistake, and so I almost üóëÔ∏è the post to do it again, but then I thought I would write this post instead in the off chance that someone can learn from my mistake.\n\nCan you spot it ?\n\n## Let's talk about strings\n\nIn R, strings can contain `\"` and `'` characters, the rules are simple. If you are inside a `\"` string, you can have a `'` character, if you are inside a `'` string, you can have a `\"` character without needing to escape them:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\"hello 'world'\"\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"hello 'world'\"\n```\n\n\n:::\n\n```{.r .cell-code}\n'bonjour \"monde\"'\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"bonjour \\\"monde\\\"\"\n```\n\n\n:::\n:::\n\n\nAnd otherwise you need to escape them\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\"ciao \\\"mondo\\\"\"\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"ciao \\\"mondo\\\"\"\n```\n\n\n:::\n\n```{.r .cell-code}\n'hola \\'mundo\\''\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"hola 'mundo'\"\n```\n\n\n:::\n:::\n\n\n## raw strings attached\n\nü§¢ escaping strings is a pain, so R 4.0.0 included raw strings, which you can learn more about in this [article](https://josiahparry.com/posts/2023-01-19-raw-strings-in-r.html) from Josiah Parry. Bonus points for the Seinfeld gif.\n\n![](r400.png)\n\n## Back to valentine and ü§¶‚Äç‚ôÇÔ∏è\n\nWe can then use raw strings to include a mix of single and double quotes, which is perfect for our use case here, because we can to augment the prompt `valentine::roses()` will compose with some information about what the package does.\n\n::: callout-tip\nThe valentine package was released specially for this years's valentine's day, its description is: Uses 'ChatGPT' \\<<https://openai.com/>\\> to create poems about R packages. Currently contains the roses() function to make \"roses are red, ...\" style poems and the prompt() function to only assemble the prompt without submitting it to 'ChatGPT'.\n:::\n\nWe have a happy mix of double quotes \"roses are red, ...\" and single quotes: 'ChatGPT' so we can use raw strings.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhint <- r\"( The valentine package was released specially for this years's valentine's day, its description is: Uses 'ChatGPT' <https://openai.com/> to create poems about R packages. Currently contains the roses() function to make \"roses are red, ...\" style poems and the prompt() function to only assemble the prompt without submitting it to 'ChatGPT'. )\"\nhint\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \" The valentine package was released specially for this years's valentine's day, its description is: Uses 'ChatGPT' <https://openai.com/> to create poems about R packages. Currently contains the roses() function to make \\\"roses are red, ...\\\" style poems and the prompt() function to only assemble the prompt without submitting it to 'ChatGPT'. \"\n```\n\n\n:::\n:::\n\n\nWe would just need to supply `hint` to the corresponding argument, i.e. `valentine::roses(\"valentine\", hint = r\"( ... )\")` except that instead ü§¶‚Äç‚ôÇÔ∏è I included `\"valentine\"` in the raw string.\n\nChatGPT did not care much, but had to work from a weird prompt:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvalentine::prompt(r\"(valentine\", hint = \"The valentine package [...] it to 'ChatGPT'.))\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMake a 4 lines \"roses are red ...\" poem about the R package \"valentine\", hint = \"The valentine package [...] it to 'ChatGPT'.)\". Include a bunch of emojis. \n```\n\n\n:::\n:::\n\n\ninstead of:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvalentine::prompt(\"valentine\", hint = r\"(The valentine package [...] it to 'ChatGPT'.))\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMake a 4 lines \"roses are red ...\" poem about the R package \"valentine\". Include a bunch of emojis. The valentine package [...] it to 'ChatGPT'.)\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}